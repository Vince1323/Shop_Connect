	<!DOCTYPE html>
	<html lang="fr" xmlns:th="http://www.thymeleaf.org" th:fragment="layout(content)">
	<head>
		<meta charset="UTF-8">
		<title>Votre Boutique</title>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
			  integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
			  crossorigin="anonymous">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
			  integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
			  crossorigin="anonymous" referrerpolicy="no-referrer"/>
		<link rel="stylesheet" href="../static/css/styles.css?v=1.0">

		<style>
			/* Variables pour le thème clair/sombre */
				   :root {
				--background-color: #ffffff;
				--text-color: #000000;
				--navbar-bg: #007bff;
				--container-bg: #f8f9fa;
				--container-text-color: #212529;
				--dropdown-bg: #ffffff;
				--dropdown-hover-bg: #007bff;
				--dropdown-text-color: #212529;
				--card-bg: #f8f9fa;
				--input-bg: #ffffff;
				--input-border: #ced4da;
				--card: #f8f9fa;
				--list-group-item-bg: #ffffff;
				--list-group-item-hover-bg: #f1f1f1;
			}

			[data-theme="dark"] {
				--background-color: #121212;
				--text-color: #ffffff;
				--navbar-bg: #333333;
				--container-bg: #1f1f1f;
				--container-text-color: #ffffff;
				--dropdown-bg: #333333;
				--dropdown-hover-bg: #555555;
				--dropdown-text-color: #ffffff;
				--card-bg: #1f1f1f;
				--input-bg: #333333;
				--input-border: #555555;
				--card: #1f1f1f;
				--list-group-item-bg: #1f1f1f;
				--list-group-item-hover-bg: #333333;
			}

			body {
				background-color: var(--background-color);
				color: var(--text-color);
				transition: background-color 0.3s, color 0.3s;
			}

			.navbar-custom {
				background-color: var(--navbar-bg) !important;
				margin-bottom: 20px;
			}

			.card-sh {
				box-shadow: 0 0 3px 0 rgba(0, 0, 0, 0.3);
			}

			.cat-div {
				box-shadow: 0 0 10px rgba(0, 0, 0, .1);
			}

			.error {
				color: red;
			}

			.navbar-custom {
				margin: 0 2px;
				border-radius: 3px;
				box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 -1px 6px #007bff;

			}


			.navbar-custom .nav-link:hover {
				box-shadow: 0 0px 3px #007bff;
				border-radius: 3px;
				transform: scale(1.1);
				transition: all 0.3s ease-in-out; /* Transition fluide */
			}


			.navbar-custom .navbar-brand:hover {
				transition: all 0.3s ease-in-out; /* Transition fluide */
			}

			.social-links a {
			text-decoration: none;
			color: white;
			font-size: 24px;
			transition: color 0.3s ease;
			}

			.social-links a:hover {
				color: #0056b3;
			}

			.carousel-indicators li {
				background-color: transparent !important;
				border: none !important;
				width: 0;
				height: 0;
				margin: 0;
				padding: 0;
			}
			.navbar-custom .navbar-brand,
			.navbar-custom .nav-link,
			.navbar-custom .dropdown-item,
			.navbar-custom i {
				color: #fff !important;
			}

			.adminBody {
				display: grid; /* Utilise CSS Grid */
				grid-template-columns: repeat(3, 1fr); /* 3 colonnes égales */
				gap: 1.5rem; /* Espacement entre les colonnes */
				padding: 2rem;
				margin: 0;
				background-color: #f4f4f4;
				min-height: 100vh; /* Hauteur minimale de l'écran */
				box-sizing: border-box;
			}


			.adminBody section {
				background-color: #ffffff; /* Fond blanc */
				border: 1px solid #ddd; /* Bordure légère */
				border-radius: 8px; /* Coins arrondis */
				box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Effet d'ombre */
				padding: 1.5rem;
				text-align: center; /* Centrage du contenu */
				transition: transform 0.3s ease, box-shadow 0.3s ease;
			}


			.adminBody section:hover {
				transform: translateY(-5px);
				box-shadow: 0 8px 12px rgba(0, 0, 0, 0.2);
			}

			.adminBody .mainNav ul {
				list-style: none;
				padding: 0;
				margin: 0;
			}

			.adminBody .mainNav li {
				margin: 1rem 0; /* Espacement entre les liens */
			}

			.adminBody .mainNav a {
				text-decoration: none;
				color: #333;
				font-size: 1.1rem;
				font-weight: bold;
				display: block;
				padding: 0.5rem 1rem;
				border-radius: 5px;
				transition: background-color 0.3s, color 0.3s;
			}

			.adminBody .mainNav a:hover {
				background-color: #007bff; /* Couleur de fond au survol */
				color: #fff; /* Texte blanc au survol */
			}

			.adminBody i {
				margin-right: 0.5rem; /* Espacement entre l'icône et le texte */
			}

			.adminBody .mainNav a {
				position: relative;
				z-index: 10;
				pointer-events: auto;
			}

			.mainNav {
			transform: perspective(500px);
			transform-style: preserve-3d;
			}

			.mainNav ul {
			list-style: none;
			padding: 5;
			position: relative;
			margin: 0;
			}

			.mainNav ul:after {
			background-color: hsla(0, 0%, 0%, 0.1);
			box-shadow: 0 0.09375em 0.1875em 0.1875em hsla(0, 0%, 0%, 0.1);
			content: '';
			height: 0.375em;
			left: 0.75em;
			position: absolute;
			right: 0.75em;
			top: 100%;
			z-index: -1;
			}

			.mainNav a {
			background-color: #Ddd;
			background-image: linear-gradient(hsla(0, 0%, 100%, 0.05), hsla(0, 0%, 0%, 0.05)),
			linear-gradient(-197.5deg, hsla(0, 0%, 100%, 0.025) 50%, transparent 50%);
			backface-visibility: visible;
			box-shadow: inset 0 0 0.125em hsla(0, 0%, 0%, 0.25),
			inset 0 0 1.5em hsla(0, 0%, 0%, 0.25);
			color: #333;
			display: block;
			font: bold 1em/3 sans-serif;
			padding: 0 1.5em;
			position: relative;
			text-align: center;
			text-decoration: none;
			text-shadow: 0 1px 1px hsla(0, 0%, 100%, 0.25);
			transition: 0.5s;
			transform-origin: 50% 0;
			transform-style: preserve-3d;
			width: 6em;
			}

			.mainNav a:after {
			background-color: inherit;
			background-image: linear-gradient(hsla(0, 0%, 100%, 0.05), hsla(0, 0%, 0%, 0.05)),
			linear-gradient(-197.5deg, hsla(0, 0%, 100%, 0.025) 50%, transparent 50%),
			linear-gradient(hsla(0, 0%, 0%, 0.25), hsla(0, 0%, 0%, 0.25));
			box-shadow: inset 0 0 0.25em hsla(0, 0%, 0%, 0.2),
			inset 0 0 1.5em hsla(0, 0%, 0%, 0.3);
			bottom: 0;
			color: #fff;
			content: attr(data-title);
			left: 100%;
			line-height: 3;
			position: absolute;
			top: 0;
			transform: rotateY(90deg);
			transform-origin: 0 0;
			width: 100%;
			}

			.mainNav a:before {
			background-color: inherit;
			background-image: linear-gradient(hsla(0, 0%, 100%, 0.07), hsla(0, 0%, 0%, 0.07)),
			linear-gradient(hsla(0, 0%, 0%, 0.5), hsla(0, 0%, 0%, 0.5));
			bottom: 0;
			content: '';
			height: 9em;
			left: 100%;
			position: absolute;
			top: 0;
			transform-origin: 0 0;
			width: 100%;
			}

			.mainNav li:nth-child(-n+2) a:before {
			transform: rotateX(-90deg) translateX(-9em) translateZ(3em);
			}

			.mainNav li:nth-child(n+3) a:before {
			transform: rotateX(-90deg) translateX(-9em);
			}

			.mainNav li:hover a {
			transform: rotateY(-90deg) translateX(-4.5em) translateZ(4.5em);
			z-index: 100;
			position: relative;
			transform-style: preserve-3d;
			}

			.mainNav a:active {
			background-color: #0d6efd;
			}

			.dropdown-menu {
			background-color: #f8f9fa !important; /* Fond clair */
			color: #212529; /* Texte noir */
			}

			.dropdown-menu .dropdown-item {
			color: #212529 !important; /* Couleur par défaut des items */
			}

			.dropdown-menu .dropdown-item:hover {
			background-color: #007bff; /* Fond bleu au survol */
			color: #fff !important; /* Texte blanc au survol */
			}

			.dropdown-divider {
			border-color: #dee2e6;
			}
		</style>
	</head>
	<body>
	<!-- Barre de navigation -->
	<nav class="navbar navbar-expand-lg navbar-custom bg-primary fixed-top">
		<div class="container-fluid">
			<!-- Logo avec icône -->
			<a class="navbar-brand" th:href="${user != null and user.role == 'ROLE_ADMIN' ? '/admin/' : '/'}">
				<i class="fa-solid fa-cart-shopping"></i> Shop Connect
			</a>

			<!-- Bouton Hamburger  -->
			<div class="d-flex">
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
						aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"
						style="border-color: white;">
					<span class="navbar-toggler-icon" style="filter: invert(1);"></span>
				</button>
				<!-- Section mode sombre/clair -->
				<div class="d-flex align-items-center ms-auto" style="padding: 0 15px;">
					<a href="#" class="nav-link" id="themeToggle" onclick="toggleTheme()"
					   style="padding: 0.375rem 0.75rem; margin: 0 10px; border-radius: 0.25rem; transition: background-color 0.3s ease, color 0.3s ease;">
						<i id="themeIcon" class="fa-solid fa-moon"></i>
					</a>
				</div>
			</div>



			<!-- Contenu collapsible -->
			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<ul class="navbar-nav me-auto mb-2 mb-lg-0">
					<th:block th:if="${user == null}">
						<li class="nav-item">
							<a class="nav-link active" aria-current="page" href="/">
								<i class="fa-solid fa-house"></i> Accueil
							</a>
						</li>
					</th:block>

					<th:block th:unless="${user == null}">
						<li class="nav-item" th:if="${user.role == 'ROLE_ADMIN'}">
							<a class="nav-link active" aria-current="page" href="/admin/">
								<i class="fa-solid fa-house"></i> Accueil
							</a>
						</li>
						<li class="nav-item" th:if="${user.role == 'ROLE_USER'}">
							<a class="nav-link active" aria-current="page" href="/">
								<i class="fa-solid fa-house"></i> Accueil
							</a>
						</li>
					</th:block>

					<!-- Lien vers Produits -->
					<li class="nav-item" th:if="${user != null and user.role == 'ROLE_USER'}">
						<a class="nav-link active" aria-current="page" href="/products">
							<i class="fa-solid fa-box"></i> Produits
						</a>
					</li>

					<!-- Lien vers Produits (Admin) -->
					<li class="nav-item" th:if="${user != null and user.role == 'ROLE_ADMIN'}">
						<a class="nav-link active" aria-current="page" href="/admin/products">
							<i class="fa-solid fa-box"></i> Produits
						</a>
					</li>


					<!-- Dropdown pour Catégorie avec icône -->
					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
							<i class="fa-solid fa-tags"></i> Catégories
						</a>
						<ul class="dropdown-menu">
							<li th:each="c:${categorys}">
								<a class="dropdown-item" th:href="@{'/products?category=' + ${c.name}}">
									[[${c.name}]]
								</a>
							</li>
						</ul>
					</li>
				</ul>

				<!-- Section utilisateur -->
				<ul class="navbar-nav ms-auto mb-2 mb-lg-0">
					<th:block th:if="${user == null}">
						<!-- Liens pour login et inscription -->
						<li class="nav-item">
							<a class="nav-link active" aria-current="page" href="/signin">
								<i class="fa-solid fa-right-to-bracket"></i> Connexion
							</a>
						</li>
						<li class="nav-item">
							<a class="nav-link active" aria-current="page" href="/register">Inscription</a>
						</li>


					</th:block>

					<th:block th:if="${user != null}">
						<th:block th:if="${user.role == 'ROLE_USER'}">
							<!-- Lien vers le panier -->
							<li class="nav-item">
								<a class="nav-link active" aria-current="page" href="/user/cart">
									<i class="fa-solid fa-cart-shopping"></i> Panier [ [[${countCart}]] ]
								</a>
							</li>
						</th:block>
						<!-- Dropdown pour utilisateur connecté -->
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle active" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
								<i class="fa-solid fa-user"></i> [[${user.name}]]
							</a>
							<ul class="dropdown-menu">
								<li th:if="${user.role == 'ROLE_USER'}">
									<a class="dropdown-item" href="/user/profile">Profil</a>
								</li>
								<li th:if="${user.role == 'ROLE_ADMIN'}">
									<a class="dropdown-item" href="/admin/profile">Profil</a>
								</li>
								<li th:if="${user.role == 'ROLE_USER'}">
									<a class="dropdown-item" href="/user/user-orders">Mes commandes</a>
								</li>
								<li>
									<a class="dropdown-item" href="/logout">Déconnexion</a>
								</li>
								<li><hr class="dropdown-divider"></li>
							</ul>
						</li>
					</th:block>
				</ul>
			</div>
		</div>
	</nav>
	<!-- Fin Navbar -->

	<!-- Fin Navbar -->

	<!-- Contenu dynamique -->
	<div th:replace="${content}"></div>

	<!-- Début Footer -->
	<div class="container-fluid text-center navbar-custom bg-primary" style="margin-top: 150px; padding: 20px;">
		<p style="margin-bottom: 10px; font-weight: bold;">SHOP CONNECT - Les Commerçants du coin</p>
		<div class="social-links">
			<!-- Facebook -->
			<a href="https://www.facebook.com" target="_blank" style="margin: 0 10px;" aria-label="Facebook">
				<i class="fab fa-facebook-f"></i>
			</a>
			<!-- Twitter -->
			<a href="https://www.twitter.com" target="_blank" style="margin: 0 10px;" aria-label="Twitter">
				<i class="fab fa-twitter"></i>
			</a>
			<!-- Instagram -->
			<a href="https://www.instagram.com" target="_blank" style="margin: 0 10px;" aria-label="Instagram">
				<i class="fab fa-instagram"></i>
			</a>
			<!-- LinkedIn -->
			<a href="https://www.linkedin.com" target="_blank" style="margin: 0 10px;" aria-label="LinkedIn">
				<i class="fab fa-linkedin-in"></i>
			</a>
			<!-- YouTube -->
			<a href="https://www.youtube.com" target="_blank" style="margin: 0 10px;" aria-label="YouTube">
				<i class="fab fa-youtube"></i>
			</a>
		</div>
		<p style="margin-top: 10px; font-size: 14px;">&copy; 2024-2025 ShopConnect. Tous droits réservés.</p>
	</div>
	<!-- Fin Footer -->


	<!-- Scripts nécessaires -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.5/dist/jquery.validate.js"></script>
	<script type="text/javascript" src="js/script.js"></script>
	<script type="text/javascript" src="../js/script.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
			crossorigin="anonymous"></script>
	<script>

		 function toggleTheme() {
			const currentTheme = localStorage.getItem('theme') || 'light';
			const newTheme = currentTheme === 'light' ? 'dark' : 'light';
			localStorage.setItem('theme', newTheme);
			updateTheme();
		}

		function updateTheme() {
			const theme = localStorage.getItem('theme') || 'light';
			document.documentElement.setAttribute('data-theme', theme);

			const themeIcon = document.getElementById('themeIcon');
			const themeText = document.getElementById('themeText');

			if (theme === 'dark') {
				themeIcon.className = 'fa-solid fa-sun';

			} else {
				themeIcon.className = 'fa-solid fa-moon';

			}
		}

		document.addEventListener('DOMContentLoaded', () => {
			updateLanguage();
			updateTheme();
		});
	</script>
	</body>
	</html>